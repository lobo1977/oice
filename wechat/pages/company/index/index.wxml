<!--pages/company/index/index.wxml-->
<page-meta background-text-style="dark">
</page-meta>
<wxs src='../../../utils/filter.wxs' module='filter' />

<view class="page-view" style="background-color:#f5f5f5;">
  <van-radio-group wx:if="{{ my.length > 1 }}" value="{{ me.company_id }}" bind:change="changeCompany">
    <van-cell-group title="切换企业">
      <van-cell wx:for="{{my}}" wx:key="id" title="{{item.title}}" 
        clickable data-name="{{item.id}}" bind:click="onCompanyClick">
        <van-radio slot="right-icon" name="{{item.id}}" />
      </van-cell>
    </van-cell-group>
  </van-radio-group>

  <van-cell-group title="待加入" wx:if="{{ waites.length > 0 || inviteMe.length > 0 }}">
    <van-cell wx:for="{{waites}}" wx:key="id"
      title="{{item.title}}" label="{{item.desc}}" center is-link
      link-type="navigateTo"
      url="../view/view?id={{item.id}}">
      <image slot="icon" mode="aspectFit" 
        src="{{filter.imageUrl(item.logo)}}" class="cell-image"></image>
    </van-cell>
    <van-cell wx:for="{{inviteMe}}" wx:key="id"
      title="{{item.title}}" label="{{item.desc}}" center is-link
      link-type="navigateTo"
      url="../view/view?id={{item.id}}">
      <image slot="icon" mode="aspectFit" 
        src="{{filter.imageUrl(item.logo)}}" class="cell-image"></image>
    </van-cell>
  </van-cell-group>

  <van-cell-group title="我加入的企业" wx:if="{{ my.length > 0 }}">
    <van-cell wx:for="{{my}}" wx:key="id"
      title="{{item.title}}" label="{{item.desc}}" center is-link
      link-type="navigateTo"
      url="../view/view?id={{item.id}}">
      <image slot="icon" mode="aspectFit" 
        src="{{filter.imageUrl(item.logo)}}" class="cell-image"></image>
    </van-cell>
  </van-cell-group>

  <van-cell-group title="我创建的企业" wx:if="{{ creates.length > 0 }}">
    <van-cell wx:for="{{creates}}" wx:key="id"
      title="{{item.title}}" label="{{item.desc}}" center is-link
      link-type="navigateTo"
      url="../view/view?id={{item.id}}">
      <image slot="icon" mode="aspectFit" 
        src="{{filter.imageUrl(item.logo)}}" class="cell-image"></image>
    </van-cell>
  </van-cell-group>

  <van-row gutter="0" custom-class="button-bar">
    <van-col span="24">
      <van-button square type="primary" icon="plus" block bindtap="newCompany">创建企业</van-button>
    </van-col>
  </van-row>
</view>
