<!--pages/company/view/view.wxml-->
<page-meta background-text-style="dark">
</page-meta>
<wxs src="../../../utils/filter.wxs" module="filter" />

<view class="page-view" style="background-color:#f5f5f5;">
  <view class="banner">
    <image wx:if="{{info.logo}}" mode="aspectFit" 
      src="{{filter.imageUrl(info.logo)}}"></image>
    <view class="title">{{info.title}}</view>
  </view>

  <van-cell-group>
    <van-cell title-width="80px" title="企业全称" icon="home-o" value="{{info.full_name}}" />
    <van-cell title-width="80px" title="地址" icon="location-o" value="{{info.address}}" />
    <van-cell title-width="80px" title="成员" icon="friends-o" value="{{info.addin}}" link-type="navigateTo" 
      url="../member/member?id={{info.id}}" is-link />
    <view class="cell-text-area" wx:if="{{info.rem}}">{{info.rem}}</view>
  </van-cell-group>

  <view wx:if="{{info.allowPass && waitUser.length}}">
    <view>待审核成员</view>
    <van-collapse accordion>
      <van-collapse-item wx:for="{{waitUser}}" wx:key="id" 
        title="{{item.title}}" name="{{item.id}}" icon="{{filter.imageUrl(item.avatar)}}">
        <van-button type="primary" size="small">通过</van-button>
        <van-button type="danger" size="small">驳回</van-button>
      </van-collapse-item>
    </van-collapse>
  </view>

  <van-row  wx:if="{{info.allowInvite || info.allowEdit || info.allowDelete}}" gutter="0" custom-class="button-bar">
    <van-col span="10">
      <van-button square type="danger" icon="friends-o" block bind:click="onInvite" disabled="{{!info.allowInvite}}">邀请同事</van-button>
    </van-col>
    <van-col span="10">
      <van-button square type="primary" icon="edit" block bind:click="edit" disabled="{{ !info.allowEdit }}">编辑</van-button>
    </van-col>
    <van-col span="4">
      <van-button square type="default" icon="delete" block bind:click="onRemove" disabled="{{ !info.allowDelete }}"></van-button>
    </van-col>
  </van-row>
</view>
